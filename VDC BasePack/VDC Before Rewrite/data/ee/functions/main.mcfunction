execute as @a[scores={used_coas=1..},nbt={SelectedItem:{tag:{uid:"ee:selector"}}}] at @s run function ee:selector
kill @e[type=snowball,tag=ee_mark]
execute as @e[tag=ee_chosen] at @s anchored eyes rotated 0 0 run summon snowball ^ ^0.5 ^ {Item:{id:"minecraft:emerald",Count:1},Tags:["system","ee_mark"],NoGravity:1}
execute as @a[nbt={SelectedItem:{tag:{uid:"ee:editor"}}}] run replaceitem entity @p weapon.mainhand minecraft:written_book{uid:"ee:editor",display:{Name:"[\"\\u00a7c实体编辑之书\"]"},title:"awa",author:"Rainbow_",pages:['["[\\u00a7c主页\\u00a7r]  ",{"selector":"@e[tag=ee_chosen,limit=1]"},"\\nHealth : ",{"nbt":"Health","entity":"@e[limit=1,tag=ee_chosen]"},"\\n\\n\\n\\u00a78Index\\n",{"text":"简单设置======== 2","clickEvent":{"action":"change_page","value":"2"}},{"text":"\\n属性一 ========= 3","clickEvent":{"action":"change_page","value":"3"}},{"text":"\\n属性二 ========= 4","clickEvent":{"action":"change_page","value":"4"}},{"text":"\\n物品装备======== 5","clickEvent":{"action":"change_page","value":"5"}},{"text":"\\n村民种类职业===== 6","clickEvent":{"action":"change_page","value":"6"}},{"text":"\\n村民交易设置===== 7","clickEvent":{"action":"change_page","value":"7"}}]','["[简单设置]\\n\\n无敌      ",{"text":"\\u00a79[是]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {Invulnerable:1}"}},{"text":"\\u00a7c[否]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {Invulnerable:0}"}},"\\n无AI      ",{"text":"\\u00a79[是]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {NoAI:1}"}},{"text":"\\u00a7c[否]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {NoAI:0}"}},"\\n沉默      ",{"text":"\\u00a79[是]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {Silent:1}"}},{"text":"\\u00a7c[否]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {Silent:0}"}},"\\n无重力    ",{"text":"\\u00a79[是]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {NoGravity:1}"}},{"text":"\\u00a7c[否]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {NoGravity:0}"}},"\\n发光      ",{"text":"\\u00a79[是]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {Glowing:1}"}},{"text":"\\u00a7c[否]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {Glowing:0}"}},{"text":"\\n\\n\\u00a7c[改名]","clickEvent":{"action":"run_command","value":"/function ee:buttom/namebook"}},{"text":"\\u00a7c[发情]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {InLove:600}"}},{"text":"\\u00a7c[驯服]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {Tame:1}"}},{"text":"\\u00a77[认主]","clickEvent":{"action":"run_command","value":"/data merge entity @e[tag=ee_chosen,limit=1] {Tame:1}"}},{"text":"\\n\\n\\u00a7c              [杀死该实体]","clickEvent":{"action":"run_command","value":"/kill @e[tag=ee_chosen,limit=1]"}}]','["[属性编辑器]\\n","[\\u00a7c输入区\\u00a7r]   ",{"score":{"objective":"ee_enter","name":"@s"}},"\\n",{"text":"\\u00a79[△]","clickEvent":{"action":"run_command","value":"/scoreboard players add @s ee_enter 10000"}},{"text":"\\u00a79[△]","clickEvent":{"action":"run_command","value":"/scoreboard players add @s ee_enter 1000"}},{"text":"\\u00a79[△]","clickEvent":{"action":"run_command","value":"/scoreboard players add @s ee_enter 100"}},{"text":"\\u00a79[△]","clickEvent":{"action":"run_command","value":"/scoreboard players add @s ee_enter 10"}},{"text":"\\u00a79[△]","clickEvent":{"action":"run_command","value":"/scoreboard players add @s ee_enter 1"}},{"text":"\\n万 千 百 十 个\\n\\u00a7c[▽]","clickEvent":{"action":"run_command","value":"/scoreboard players remove @s ee_enter 10000"}},{"text":"\\u00a7c[▽]","clickEvent":{"action":"run_command","value":"/scoreboard players remove @s ee_enter 1000"}},{"text":"\\u00a7c[▽]","clickEvent":{"action":"run_command","value":"/scoreboard players remove @s ee_enter 100"}},{"text":"\\u00a7c[▽]","clickEvent":{"action":"run_command","value":"/scoreboard players remove @s ee_enter 10"}},{"text":"\\u00a7c[▽]","clickEvent":{"action":"run_command","value":"/scoreboard players remove @s ee_enter 1"}},"\\n\\u00a7c当前血量\\u00a7r",{"text":"[更改]  ","clickEvent":{"action":"run_command","value":"/function ee:buttom/health"},"hoverEvent":{"action":"show_text","value":"x1/10"}},{"nbt":"Health","entity":"@e[tag=ee_chosen,limit=1]"},"\\n\\u00a7c最大血量\\u00a7r",{"text":"[更改]  ","clickEvent":{"action":"run_command","value":"/function ee:buttom/maxhealth"},"hoverEvent":{"action":"show_text","value":"x1"}},{"nbt":"Attributes[{Name:\\"generic.maxHealth\\"}].Base","entity":"@e[tag=ee_chosen,limit=1]"},"\\n\\u00a7c攻击伤害\\u00a7r",{"text":"[更改]  ","clickEvent":{"action":"run_command","value":"/function ee:buttom/attackdamage"},"hoverEvent":{"action":"show_text","value":"x1/100"}},{"nbt":"Attributes[{Name:\\"generic.attackDamage\\"}].Base","entity":"@e[tag=ee_chosen,limit=1]"},"\\n\\u00a7c移动速度\\u00a7r",{"text":"[更改]  ","clickEvent":{"action":"run_command","value":"/function ee:buttom/movementspeed"},"hoverEvent":{"action":"show_text","value":"x1/100"}},{"nbt":"Attributes[{Name:\\"generic.movementSpeed\\"}].Base","entity":"@e[tag=ee_chosen,limit=1]"},"\\n\\u00a7c自带护甲\\u00a7r",{"text":"[更改]  ","clickEvent":{"action":"run_command","value":"/function ee:buttom/armor"},"hoverEvent":{"action":"show_text","value":"x1"}},{"nbt":"Attributes[{Name:\\"generic.armor\\"}].Base","entity":"@e[tag=ee_chosen,limit=1]"},"\\n\\u00a7c盔甲韧性\\u00a7r",{"text":"[更改]  ","clickEvent":{"action":"run_command","value":"/function ee:buttom/armortoughness"},"hoverEvent":{"action":"show_text","value":"x1"}},{"nbt":"Attributes[{Name:\\"generic.armorToughness\\"}].Base","entity":"@e[tag=ee_chosen,limit=1]"}]','["[属性编辑第二页]\\n[\\u00a7c输入区\\u00a7r]   ",{"score":{"objective":"ee_enter","name":"@s"}},"\\n",{"text":"\\u00a79[△]","clickEvent":{"action":"run_command","value":"/scoreboard players add @s ee_enter 10000"}},{"text":"\\u00a79[△]","clickEvent":{"action":"run_command","value":"/scoreboard players add @s ee_enter 1000"}},{"text":"\\u00a79[△]","clickEvent":{"action":"run_command","value":"/scoreboard players add @s ee_enter 100"}},{"text":"\\u00a79[△]","clickEvent":{"action":"run_command","value":"/scoreboard players add @s ee_enter 10"}},{"text":"\\u00a79[△]","clickEvent":{"action":"run_command","value":"/scoreboard players add @s ee_enter 1"}},{"text":"\\n万 千 百 十 个\\n\\u00a7c[▽]","clickEvent":{"action":"run_command","value":"/scoreboard players remove @s ee_enter 10000"}},{"text":"\\u00a7c[▽]","clickEvent":{"action":"run_command","value":"/scoreboard players remove @s ee_enter 1000"}},{"text":"\\u00a7c[▽]","clickEvent":{"action":"run_command","value":"/scoreboard players remove @s ee_enter 100"}},{"text":"\\u00a7c[▽]","clickEvent":{"action":"run_command","value":"/scoreboard players remove @s ee_enter 10"}},{"text":"\\u00a7c[▽]","clickEvent":{"action":"run_command","value":"/scoreboard players remove @s ee_enter 1"}},"\\n\\u00a7c追踪距离\\u00a7r",{"text":"[更改]  ","clickEvent":{"action":"run_command","value":"/function ee:buttom/followrange"},"hoverEvent":{"action":"show_text","value":"x1"}},{"nbt":"Attributes[{Name:\\"generic.followRange\\"}].Base","entity":"@e[tag=ee_chosen,limit=1]"},"\\n\\u00a7c击退抗性\\u00a7r",{"text":"[更改]  ","clickEvent":{"action":"run_command","value":"/function ee:buttom/kbresistance"},"hoverEvent":{"action":"show_text","value":"x1/100"}},{"nbt":"Attributes[{Name:\\"generic.knockbackResistance\\"}].Base","entity":"@e[tag=ee_chosen,limit=1]"},"\\n\\u00a7c马类跳跃\\u00a7r",{"text":"[更改]  ","clickEvent":{"action":"run_command","value":"/function ee:buttom/jumpstrength"},"hoverEvent":{"action":"show_text","value":"x1/100"}},{"nbt":"Attributes[{Name:\\"horse.jumpStrength\\"}].Base","entity":"@e[tag=ee_chosen,limit=1]"},"\\n\\u00a7c飞行速度\\u00a7r",{"text":"[更改]  ","clickEvent":{"action":"run_command","value":"/function ee:buttom/flyspeed"},"hoverEvent":{"action":"show_text","value":"x1/100"}},{"nbt":"Attributes[{Name:\\"generic.flySpeed\\"}].Base","entity":"@e[tag=ee_chosen,limit=1]"},"\\n\\u00a7c僵尸增援\\u00a7r",{"text":"[更改]  ","clickEvent":{"action":"run_command","value":"/function ee:buttom/reinforcements"},"hoverEvent":{"action":"show_text","value":"x1/100"}},{"nbt":"Attributes[{Name:\\"zombie.spawnReinforcements\\"}].Base","entity":"@e[tag=ee_chosen,limit=1]"}]','["[物品管理]\\n-副手持有物品,点击对应槽位的按钮来使实体装备物品。\\n",{"text":"[\\u00a79主手\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] HandItems[0] set from entity @s Inventory[{Slot:-106b}]"}},{"text":"[\\u00a79副手\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] HandItems[1] set from entity @s Inventory[{Slot:-106b}]"}},{"text":"\\n[\\u00a79头盔\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] ArmorItems[3] set from entity @s Inventory[{Slot:-106b}]"}},{"text":"\\n[\\u00a79胸甲\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] ArmorItems[2] set from entity @s Inventory[{Slot:-106b}]"}},{"text":"\\n[\\u00a79护腿\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] ArmorItems[1] set from entity @s Inventory[{Slot:-106b}]"}},{"text":"\\n[\\u00a79鞋子\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] ArmorItems[0] set from entity @s Inventory[{Slot:-106b}]"}}]','["[村民种类职业]\\n[种类]",{"text":"\\n [\\u00a79草原\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.type set value plains"}},{"text":" [\\u00a79沙漠\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.type set value desert"}},{"text":" [\\u00a79雨林\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.type set value jungle"}},{"text":"\\n [\\u00a79稀树\\u00a7r]       ","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.type set value savanna"}},{"text":" [\\u00a79雪原\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.type set value snow"}},{"text":"\\n [\\u00a79沼泽\\u00a7r]       ","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.type set value swamp"}},{"text":" [\\u00a79针叶\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.type set value taiga"}},"\\n[职业]\\n",{"text":" [\\u00a79盔甲\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value armorer"}},{"text":" [\\u00a79屠夫\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value butcher"}},{"text":" [\\u00a79制图\\u00a7r]\\n","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value cartographer"}},{"text":" [\\u00a79牧师\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value cleric"}},{"text":" [\\u00a79农民\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value farmer"}},{"text":" [\\u00a79渔夫\\u00a7r]\\n","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value fisherman"}},{"text":" [\\u00a79持矢\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value fletcher"}},{"text":" [\\u00a79皮匠\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value leatherworker"}},{"text":" [\\u00a79图书\\u00a7r]\\n","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value librarian"}},{"text":" [\\u00a79石匠\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value mason"}},{"text":" [\\u00a79傻子\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value nitwit"}},{"text":" [\\u00a79羊倌\\u00a7r]\\n","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value shepherd"}},{"text":" [\\u00a79工具\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.profession set value toolsmith"}},{"text":" \\n[\\u00a79等级\\u00a7r]\\n","clickEvent":{"action":"run_command","value":"我是一只猪"}},{"text":" [\\u00a791\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.level set value 1"}},{"text":" [\\u00a792\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.level set value 2"}},{"text":" [\\u00a793\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.level set value 3"}},{"text":" [\\u00a794\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.level set value 4"}},{"text":" [\\u00a795\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] VillagerData.level set value 5"}}]','["[村民交易]\\n",{"text":" [\\u00a79创建空白项\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] Offers.Recipes append value {buy:{},buyB:{},sell:{},maxUses:10}"}},{"text":"\\n [\\u00a79需求A\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] Offers.Recipes[-1].buy set from entity @s Inventory[{Slot:-106b}]"}},{"text":" [\\u00a79需求B\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] Offers.Recipes[-1].buyB set from entity @s Inventory[{Slot:-106b}]"}},{"text":"\\n [\\u00a79货物\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] Offers.Recipes[-1].sell set from entity @s Inventory[{Slot:-106b}]"}},{"text":"\\n [\\u00a79最大交易次数\\u00a7r]","clickEvent":{"action":"run_command","value":"/function ee:buttom/maxuses"}},{"text":"\\n [\\u00a79村民获得经验\\u00a7r]","clickEvent":{"action":"run_command","value":"/function ee:buttom/villagerxp"}},{"text":"\\n [\\u00a79获得经验\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] Offers.Recipes[-1].sell set from entity @s Inventory[{Slot:-106b}]"}},{"text":"    [\\u00a79是\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] Offers.Recipes[-1].rewardExp set value true"}},{"text":" [\\u00a7c否\\u00a7r]","clickEvent":{"action":"run_command","value":"/data modify entity @e[limit=1,tag=ee_chosen] Offers.Recipes[-1].rewardExp set value false"}},{"text":"\\n\\n [\\u00a7c删除交易项\\u00a7r]","clickEvent":{"action":"run_command","value":"/data remove entity @e[limit=1,tag=ee_chosen] Offers.Recipes[-1]"}},{"text":"\\n [\\u00a7c正数\\u00a7r]","clickEvent":{"action":"run_command","value":""}},{"text":"\\n [\\u00a7r第一\\u00a7r]","clickEvent":{"action":"run_command","value":"/data remove entity @e[limit=1,tag=ee_chosen] Offers.Recipes[0]"}},{"text":" [\\u00a7r第二\\u00a7r]","clickEvent":{"action":"run_command","value":"/data remove entity @e[limit=1,tag=ee_chosen] Offers.Recipes[1]"}},{"text":" [\\u00a7r第三\\u00a7r]","clickEvent":{"action":"run_command","value":"/data remove entity @e[limit=1,tag=ee_chosen] Offers.Recipes[2]"}},{"text":"\\n [\\u00a7c倒数\\u00a7r]","clickEvent":{"action":"run_command","value":""}},{"text":"\\n [\\u00a7r第一\\u00a7r]","clickEvent":{"action":"run_command","value":"/data remove entity @e[limit=1,tag=ee_chosen] Offers.Recipes[-1]"}},{"text":" [\\u00a7r第二\\u00a7r]","clickEvent":{"action":"run_command","value":"/data remove entity @e[limit=1,tag=ee_chosen] Offers.Recipes[-2]"}},{"text":" [\\u00a7r第三\\u00a7r]","clickEvent":{"action":"run_command","value":"/data remove entity @e[limit=1,tag=ee_chosen] Offers.Recipes[-3]"}}]']}
execute as @e[nbt={Item:{tag:{uid:"ee:namebook"}}}] at @s run data modify entity @e[limit=1,tag=ee_chosen] CustomName set from entity @s Item.tag.title
execute as @e[nbt={Item:{tag:{uid:"ee:namebook"}}}] at @s run kill @s


execute as @e[nbt={Item:{tag:{uid:"ee:editor"}}}] at @s if block ~ ~ ~ chest run kill @e[tag=ee_trade_editor]
execute as @e[nbt={Item:{tag:{uid:"ee:editor"}}}] at @s if block ~ ~ ~ chest align xyz positioned ~0.5 ~ ~0.5 run summon armor_stand ~ ~ ~ {Marker:1,Invisible:1,Small:1,Tags:["system","ee_trade_editor"]}
execute as @e[nbt={Item:{tag:{uid:"ee:editor"}}}] at @s if block ~ ~ ~ chest run kill @s

execute as @e[tag=ee_trade_editor] at @s run function ee:trade_chest